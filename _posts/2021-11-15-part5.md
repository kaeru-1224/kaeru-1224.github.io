---
layout: post

title: Second Posting:ê°¯ì¸ ë¹„ì°ë¨¹!-Part 5:Transform Data to Use MDX
tags: Gatsby
date: 2021-11-15 15:04
---

<h3>Transform Data to Use MDX</h3>

íŒŒíŠ¸4ì—ì„œëŠ” `gatsby-source-filesystem`ì´ë¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´ì„œ, ë¸”ë¡œê·¸ ê²Œì‹œê¸€ íŒŒì¼ì˜ ì´ë¦„ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë°ë ¤ì˜¤ëŠ” ì‘ì—…ì„ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, `gatsby-source-filesystem`ì€ íŒŒì¼ ìì²´ ë°ì´í„°ì— ì ‘ê·¼í•´, ëœë”ë§ê¹Œì§€ í•´ì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸ì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— `transformer plugin`ì´ë¼ ë¶ˆë¦¬ëŠ” ë‹¤ë¥¸ ì¢…ë¥˜ì˜ í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.

> ğŸ¤”ê°¯ì¸ ë¹„ì—ì„œëŠ” ì—¬ëŸ¬ íƒ€ì…ì˜ í”ŒëŸ¬ê·¸ì¸ì„ ì´ì•¼ê¸°í•˜ëŠ”ë°, ê°¯ì¸ ë¹„ì—ì„œë§Œ ê·¸ëŸ¬ëŠ”ê±´ì§€ ì•„ë‹ˆë©´ ë‹¤ë¥¸ê³³ì—ì„œë„ ë™ì¼í•˜ê²Œ ì§„í–‰ì´ë˜ëŠ”ì§€ ê¶ê¸ˆí•¨..

íŠœí† ë¦¬ì–¼ì—ì„œëŠ” `transformer plugin`ì¤‘ í•˜ë‚˜ì¸ `gatsby-plugin-mdx`ë¥¼ ì´ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤. ì´ í”ŒëŸ¬ê·¸ì¸ì˜ ê²½ìš° ë§ˆí¬ë‹¤ìš´ê³¼ jsx ë¥¼ ë¸”ë¡œê·¸ íŒŒì¼ì— í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ìˆë„ë¡ ë„ì™€ì¤„ ê²ƒì´ê³ ,ë¸”ë¡œê·¸ í˜ì´ì§€ë¥¼ ëœë”ë§í•˜ê¸°ìœ„í•´ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.

-ê°¯ì¸ ë¹„ì˜ ë°ì´í„°ë ˆì´ì–´ë¥¼ í™•ì¸í•´ë³´ì!

![ datalayer_ex](https://www.gatsbyjs.com/static/04384c192391ebeac3b63ea42872f3f2/5df5d/data-layer-with-nodes.png)

ê°¯ì¸ ë¹„ì˜ ë°ì´í„° ë ˆì´ì–´ ì—ì„œëŠ” `nodes`ë¼ëŠ” ê°ì²´ë¡œ ì €ì¥ì´ë©ë‹ˆë‹¤. ë…¸ë“œëŠ” ë°ì´í„° ë ˆì´ì–´ì—ì„œ ê°€ì¥ ì‘ì€ ë°ì´í„°ì˜ ë‹¨ìœ„ë¡œ ê° ì†ŒìŠ¤ í”ŒëŸ¬ê·¸ì¸ë“¤ì€ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ ë…¸ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.  
(âœ”gatsby-source-filesystem ëŠ” File nodesë¥¼ ìƒì„±í•œë‹¤)

<strong>transformer plugin</strong>ì€ ë…¸ë“œë¥¼ ë˜ ë‹¤ë¥¸ ë…¸ë“œë¡œ ë³€í˜•ì‹œí‚µë‹ˆë‹¤.ì˜ˆë¥¼ë“¤ì–´ ì´ë²ˆì— ì‚¬ìš©í•˜ëŠ” `gatsby-plugin-mdx`ì˜ ê²½ìš° `.mdx`í™•ì¥ìë¥¼ ê°€ì§„ íŒŒì¼ ë…¸ë“œë¥¼ MDX ë…¸ë“œ(MDXë…¸ë“œëŠ” GraphQLì„ ì‚¬ìš©ì‹œ ë‹¤ë¥¸ í•„ë“œë¥¼ ì§€ë‹ˆê³  ìˆìŠµë‹ˆë‹¤. )ë¡œ ë³€í™˜í•´ì¤ë‹ˆë‹¤.

âœ” `transformer plugin`ì˜ ê²½ìš° ì´ë¦„ ìì²´ì— `transformer`ê°€ ë“¤ì–´ê°€ì„œ ì›ë³¸ ë…¸ë“œê°€ ë³€ê²½ì´ ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë“¤ë¦¬ì§€ë§Œ, ì‚¬ì‹¤ ì›ë³¸ ë…¸ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œìš´ ë…¸ë“œë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ê¸°ì¡´ì— `gatsby-source-filesystem.`ìœ¼ë¡œ ë§Œë“¤ì–´ ë‘ì—ˆë˜ íŒŒì¼ ë…¸ë“œë“¤ì—ë„ ì—¬ì „íˆ ì ‘ê·¼ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!

<h3>Add some MDX content to your blog posts</h3>

ì´ì „ part4ì—ì„œ ë§Œë“¤ì–´ ë†“ì•˜ë˜ ë¸”ë¡œê·¸íŒŒì¼ì— mdx ë¬¸ë²•ì— ë”°ë¼ì„œ ê¸€ì„ ì‘ì„±í•´ ì¤ë‹ˆë‹¤.

```mdx
---
title: "My First Post"
date: "2021-07-23"
---

This is my first blog post! Isn't it _great_?
Some of my **favorite** things are:

- Petting dogs
- Singing
- Eating potato-based foods
```

<h3>Install and configure the MDX transformer plugin (and dependencies)</h3>

ì‘ì„±ì´ ëë‚¬ë‹¤ë©´ ì•ì—ì„œ ì–¸ê¸‰í•´ì¤€ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤.

-`gatsby-plugin-mdx`  
ì´ í”ŒëŸ¬ê·¸ì¸ì˜ ê²½ìš° GraphQL ì¿¼ë¦¬ì— `allMdx`ê·¸ë¦¬ê³  `mdx`í•„ë“œë¥¼ ì¶”ê°€í•´ì£¼ê³  `MDXRenderer`ì»´í¬ë„ŒíŠ¸ë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤.

ê·¸ëŸ°ë° `gatsby-plugin-mdx`ì€ í”ŒëŸ¬ê·¸ì¸ ìì²´ ë¿ë§Œì•„ë‹ˆë¼ ì¶”ê°€ì ì¸ dependenciesë“¤ì„ í•„ìš”ë¡œ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì„¤ì¹˜ì‹œ `@mdx-js/mdx`(MDXë¥¼ êµ¬í˜„í•´ì¤ë‹ˆë‹¤)ì™€ `@mdx-js/react` (êµ¬í˜„í•œ MDXë¥¼ ë¦¬ì•¡íŠ¸ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì— ë°°ì¹˜í•´ì¤ë‹ˆë‹¤)ë¥¼ í•¨ê»˜ ì„¤ì¹˜í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤

```
npm install gatsby-plugin-mdx @mdx-js/mdx @mdx-js/react
```

í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•œ í›„ì— ê°¯ì¸ ë¹„ì—ê²Œ í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©ì„ ì•Œë¦¬ê¸°ìœ„í•´ `gatsby-config.js`íŒŒì¼ì„ ìˆ˜ì •í•´ì¤ë‹ˆë‹¤.

```javascript
module.exports = {
  siteMetadata: {
    title: "My Super Cool Blog",
  },
  plugins: [
    "gatsby-plugin-image",
    "gatsby-plugin-sharp",
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        name: `blog`,
        path: `${__dirname}/blog/`,
      },
    },
    "gatsby-plugin-mdx",
  ],
};
```

<h3>Update the Blog page query to use the allMdx field instead of allFile</h3>

`gatsby-plugin-mdx` í”ŒëŸ¬ê·¸ì¸ì€ GraphQLì¿¼ë¦¬ì— `allMdx `ì™€` mdx` ì˜ì—­ì„ ì¶”ê°€í•´ì£¼ëŠ”ë°, íŠœí† ë¦¬ì–¼ì—ì„œëŠ” `allMdx `ë¥¼ ì‚¬ìš©í•˜ê²Œë©ë‹ˆë‹¤.

> ğŸ¤” `allMdx `ì™€` mdx` ì˜ ì°¨ì´ëŠ” ë­ì§€?  
> ë‹¨ì–´ê·¸ëŒ€ë¡œ `allMdx ` MDXë…¸ë“œ ì „ì²´ë¡œ ë¶€í„° ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  `mdx`ëŠ” íŠ¹ì • mdxë…¸ë“œì—ì„œ ë°›ì•„ì˜¤ëŠ”ê±¸ê¹Œ??????

GraphiQLë¥¼ ì´ìš©í•´ ìƒˆë¡œìš´ ì¿¼ë¦¬ë¥¼ ë§Œë“¤ì–´ ë¸”ë¡œê·¸ ê²Œì‹œê¸€ì˜ ë°ì´í„°ë¥¼ ë°›ì•„ì™€ì¤ë‹ˆë‹¤.

```javascript
query MyQuery {
  allMdx {
    nodes {
      frontmatter {
        date(formatString: "MMMM D, YYYY")
        title
      }
    }
  }
}
```

> ğŸ¤”frontmatter?
> ë§ˆí¬ë‹¤ìš´ì— íŒŒì¼ì— ëŒ€í•œ ì¶”ê°€ ë°ì´í„°ë¥¼ ì œê³µí•´ì£¼ë©° ì´ë•Œ keyì™€ valueë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤

âœ…formatString?  
frontmatterì—ì„œ dateë¥¼ ì´ìš©í• ë•Œ formatStringìœ¼ë¡œ ë‚ ì§œì˜ í˜•íƒœ(2021.ì¸ì§€ 2021/ì¸ì§€ ë“±ë“±)ë¥¼ ë°”ê¿”ì¤„ ìˆ˜ìˆë‹¤

```
---
date: "2021-07-23"
---
```

ìœ„ì˜ í˜•íƒœì˜ mdxë¥¼ ì•„ë˜ì˜ `formatString: "MMMM D, YYYY"`ìœ¼ë¡œ ì§„í–‰ì„ í•´ì£¼ë©´

```
query MyQuery {
  allMdx {
    nodes {
      frontmatter {
        date(formatString: "MMMM D, YYYY")
      }
    }
  }
}
```

`July 23, 2021`ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ê²Œëœë‹¤

ë˜í•œ ì¿¼ë¦¬ì— idê°’ì„ ì¶”ê°€í•´ ì¤„ ìˆ˜ìˆëŠ”ë°, ì´ id ê°’ì˜ ê²½ìš° ê²Ÿì¸ ë¹„ê°€ ìë™ì ìœ¼ë¡œ ë°ì´í„° ë ˆì´ì–´ì˜ ëª¨ë“  ë…¸ë“œì— ì¶”ê°€í•´ì£¼ë©°, ë¬¸ìì—´ì˜ ëª¨ìŠµì„ í•˜ê³  ìˆë‹¤. ì´í›„ì— ì´ idê°’ì„ ë¦¬ì•¡íŠ¸ì˜ keyë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤

âœ…sort

ì¿¼ë¦¬ë¥¼ ì§„í–‰í–ˆì„ë•Œ, ê²Œì‹œê¸€ì´ ë‚ ì§œ ìˆœì„œëŒ€ë¡œ ë‚˜ì˜¤ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ìˆë‹¤

```
{
  "data": {
    "allMdx": {
      "nodes": [
        {
          "frontmatter": {
            "date": "July 25, 2021",
            "title": "Yet Another Post"
          },
          "id": "c4b5ae6d-f3ad-5ea4-ab54-b08a72badea1"
        },
        {
          "frontmatter": {
            "date": "July 23, 2021",
            "title": "My First Post"
          },
          "id": "11b3a825-30c5-551d-a713-dd748e7d554a"
        },
        {
          "frontmatter": {
            "date": "July 24, 2021",
            "title": "Another Post"
          },
          "id": "560896e4-0148-59b8-9a2b-bf79bee68fba"
        }
      ]
    }
  },
  "extensions": {}
}
```

![ sort_ex](/sort.png)

ì´ëŸ°ê²½ìš° GraphiQLì˜ `sort`ë¥¼ ì´ìš©í•´ì„œ ì˜¤ë¦„ì°¨ìˆœ í˜¹ì€ ë‚´ë¦¼ ì°¨ìˆœìœ¼ë¡œ ë‚˜ì—´í•´ ì¤„ ìˆ˜ ìˆë‹¤. í•„ìš”í•œ í•„ë“œì™€ ì˜¤ë¦„/ë‚´ë¦¼ ì°¨ìˆœì„ ì„ íƒí›„ ì§„í–‰í•´ì£¼ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ìˆë‹¤.

```
{
          "frontmatter": {
            "date": "July 25, 2021",
            "title": "Yet Another Post"
          },
          "id": "c4b5ae6d-f3ad-5ea4-ab54-b08a72badea1"
        },
        {
          "frontmatter": {
            "date": "July 24, 2021",
            "title": "Another Post"
          },
          "id": "560896e4-0148-59b8-9a2b-bf79bee68fba"
        },
        {
          "frontmatter": {
            "date": "July 23, 2021",
            "title": "My First Post"
          },
          "id": "11b3a825-30c5-551d-a713-dd748e7d554a"
        }
```

âœ…body

ì¿¼ë¦¬ì— ê²Œì‹œê¸€ì˜ ë‚´ìš©ì„ ì²¨ê°€í•˜ê¸°ìœ„í•´ì„œ body í•„ë“œë¥¼ ì´ìš©í•´ì£¼ë©´ëœë‹¤. ê·¸ëŸ°ë° `body` í•„ë“œë¥¼ í†µí•´ ë‚˜ì˜¨ ë°ì´í„°ë¥¼ `{node.body}`ë¡œ í™•ì¸í•˜ê²Œë˜ë©´, ì´í•´í•˜ê¸° ì–´ë ¤ìš´ ë§ì€ ë°ì´í„°ê°€ ë‚˜ì˜¤ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ë°”ë””í•„ë“œì˜ ê²½ìš° mdxë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆìœ¼ë©°, ê·¸ ë‚´ìš©ì„ `MDXRenderer`ë¥¼ í†µí•´ ì‚¬ìš©í•  ìˆ˜ìˆìŠµë‹ˆë‹¤.

ê¸°ì¡´ì— `allFile`ë¡œ ì§„í–‰í•´ ì£¼ì—ˆë˜ ì¿¼ë¦¬ë¥¼ `allMdx`ë¡œ ë°”ê¾¸ì–´ ì§„í–‰ì„í•´ì£¼ë©´ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì–»ê²Œë©ë‹ˆë‹¤

```javascript
// imports

const BlogPage = ({ data }) => {
  return (
    <Layout pageTitle="My Blog Posts">
      {data.allMdx.nodes.map((node) => (
        <article key={node.id}>
          <h2>{node.frontmatter.title}</h2>
          <p>Posted: {node.frontmatter.date}</p>
        </article>
      ))}
    </Layout>
  );
};

export const query = graphql`
  query {
    allMdx(sort: { fields: frontmatter___date, order: DESC }) {
      nodes {
        frontmatter {
          title
          date(formatString: "MMMM DD, YYYY")
        }
        id
        body
      }
    }
  }
`;

export default BlogPage;
```

ìµœì¢…ì ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ê²Œëœë‹¤

![page_ex](https://www.gatsbyjs.com/static/da73b53b1e6817bfcdd4a840275a107b/078fe/blog-page-with-frontmatter.png)
