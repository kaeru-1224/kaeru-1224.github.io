---
layout: post

title: ê°¯ì¸ ë¹„ì°ë¨¹! Part 7:Add Dynamic Images from Data
tags: Gatsby
date: 2021-11-25 06:41
---

ì´ì „ íŒŒíŠ¸3ì—ì„œ ì •ì  ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ê¸°ìœ„í•´ `gatsby-plugin-image`ë¥¼ ì‚¬ìš©í•´ì£¼ì—ˆë˜ ê²ƒì²˜ëŸ¼, ì´ë²ˆì—ëŠ” ê³„ì†í•´ì„œ ë³€í•˜ëŠ” ë™ì  ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ê¸°ìœ„í•´ì„œ`gatsby-plugin-image`ë¥¼ ì‚¬ìš©í•´ë³¼ ì˜ˆì •ì´ë‹¤.ì´ë²ˆ íŒŒíŠ¸ì—ì„œëŠ” ê° ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ì— ë™ì `GatsbyImage`ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•´ì„œ ë°ì´í„°ë¡œë¶€í„° ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•´ë³¼ ê²ƒì´ë‹¤.

ğŸ¤” `GatsbyImage` - `StaticImage`?

`GatsbyImage` ì™€ `StaticImage`ì˜ ì°¨ì´ëŠ” ë¬´ì—‡ì¼ê¹Œ?. ë‘˜ì˜ ì°¨ì´ëŠ” ê²°êµ­ ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ ë ë•Œ ë§ˆë‹¤ ë§¤ë²ˆ ê°™ì€ ì´ë¯¸ì§€ê°€ ì˜¤ëŠ”ì§€ ì•„ë‹ˆë©´ ë‹¤ë¥¸ ì´ë¯¸ì§€ê°€ ì˜¤ëŠ”ì§€ì—ì„œ ì˜¨ë‹¤.  
í›„ìì˜ ê²½ìš° ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ë ë•Œë§ˆë‹¤ ê°™ì€ ì´ë¯¸ì§€ ìì›ì´ ì˜¤ëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸í•˜ê³  í›„ìì˜ ê²½ìš° ì´ë¯¸ì§€ ìì›ì´ í•˜ë‚˜ì˜ ì†ì„±ìœ¼ë¡œ ì „ë‹¬ì´ëœë‹¤.  
(ì¦‰ í•˜ë‚˜ì˜ ì†ì„±ìœ¼ë¡œ ì „ë‹¬ë˜ê¸° ë•Œë¬¸ì— ë™ì ìœ¼ë¡œ ë°”ë€”ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ë‹¤)

<h3>Add hero images to blog post frontmatter</h3>

(hero images= ë°°ë„ˆì´ë¯¸ì§€, ëŒ€í˜•ì´ë¯¸ì§€, ê²Œì‹œê¸€ì—ì„œ ê°€ì¥ ìœ„ì— ì˜¤ëŠ” ì´ë¯¸ì§€)

![dynamicimage_ex](https://www.gatsbyjs.com/static/f7150a9cc0e9f60b6d51c544ecc79117/5df5d/reorganize-blog-directory.png)

1.mdxê²Œì‹œê¸€ë§ˆë‹¤ ê°ê°ì˜ í´ë”ë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ê·¸ëŸ°ë° ê·¸ë•Œ ê° í´ë”ì˜ ëª…ì€ URLë¡œ ì‚¬ìš©ë˜ì—ˆë˜ ì´ë¦„ìœ¼ë¡œ ì‘ì„±í•˜ë˜, mdxì˜ ê²½ìš° indexë¡œ íŒŒì¼ëª…ì„ ë³€ê²½í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.  
ğŸ‘‰ íŒŒì¼ëª…ì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ” ê²½ìš° routeê°€ `blog/my-post/my-post/`ê°™ì€ í˜•íƒœê°€ ë ìˆ˜ìˆìœ¼ë¯€ë¡œ ë³€ê²½í•´ì£¼ëŠ” ê²ƒì´ ìš©ì´í•©ë‹ˆë‹¤

âœ” íŒŒì¼ëª… ë³€ê²½ í›„, ê°¯ì¸ ë¹„ë¥¼ ì¬ ì‹¤í–‰í•´ì£¼ì–´ì•¼í•œë‹¤

![dynamicimage_ex](https://www.gatsbyjs.com/static/5cc60b117349ec93e6f1b59b34917a8e/5df5d/folder-structure-with-images.png)

2.ì›í•˜ëŠ” ì´ë¯¸ì§€ë¥¼, í•´ë‹¹ ê²Œì‹œê¸€ í´ë”ì— ê°ê° ë„£ì–´ì¤€ë‹¤

âœ” ê°€ë” ì´ë¯¸ì§€ ìì²´ì˜ í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì„œ, ëœë”ë§ë˜ëŠ”ë° ì†ë„ê°€ ì¢€ë” ê±¸ë¦´ìˆ˜ìˆëŠ”ë° ì´ëŠ” ì‚¬ì´íŠ¸ê°€ ë¹Œë“œë˜ëŠ” ì†ë„ ì—­ì‹œ ëŠ¦ì–´ì§€ê²Œ ë§Œë“œë¯€ë¡œ, ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ ìµœì í™”í•´ì£¼ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤

3.ê° ë¸”ë¡œê·¸ ê²Œì‹œê¸€ì— ì¶”ê°€ì ì¸ `frontmatter`ìš”ì†Œë¥¼ ì¶”ê°€í•´ì¤ë‹ˆë‹¤

(ğŸ¤”`frontmatter`?: ê²Œì‹œë¬¼ì— ëŒ€í•œ í™˜ê²½ì„¤ì •ì„ ì£¼ë¡œ ì ì–´ì£¼ëŠ” ê³µê°„)

```
hero_image: ê²Œì‹œê¸€ ë‚´ ì´ë¯¸ì§€ì˜ ê²½ë¡œ
hero_image_alt: ì ‘ê·¼ì„±ì„ ìœ„í•´ ì´ë¯¸ì§€ë¥¼ ëŒ€ì²´í•  í…ìŠ¤íŠ¸
hero_image_credit_text: ì‚¬ì§„ ì›ì‘ìì´ë¦„
hero_image_credit_link: ì‚¬ì§„ ì›ì‘ìì˜ sns ë“±
```

ğŸ‘‰ ìœ„ ì„¸ê°œì˜ ì‘ì—…ì„ ë§ˆë¬´ë¦¬ í–ˆì„ ê²½ìš°, ë°ì´í„° ë ˆì´ì–´ì™€ ì—°ê²°í•´ í…œí”Œë¦¿ìœ¼ë¡œ ì‚¬ì§„ë“¤ì„ ê°€ì ¸ì˜¬ ìˆ˜ìˆì„ ê²ƒì´ë‹¤

<h3>Install and configure gatsby-transformer-sharp</h3>

`GatsbyImage`ë¥¼ ì´ìš©í•´ì£¼ë ¤ë©´ `gatsby-transformer-sharp` í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ ì£¼ì–´ì•¼í•œë‹¤.

![ImageSharp_ex](https://www.gatsbyjs.com/static/d710adc16d08d60f8919c62468ec0e8f/a5262/data-layer-with-imagesharp-nodes.png)

ê°¯ì¸ ë¹„ëŠ” ë¹Œë“œí•´ì¤„ë•Œ ë°ì´í„°ë ˆì´ì–´ì— ë…¸ë“œë¥¼ ì¶”ê°€í•´ì£¼ëŠ”ë°,`gatsby-transformer-sharp`í”ŒëŸ¬ê·¸ì¸ì€ ì´ë¯¸ì§€ í™•ì¥ì(.png,.jpg ë“±)ìœ¼ë¡œ ëë‚˜ëŠ” íŒŒì¼ ë…¸ë“œë¥¼ ì°¾ì•„ `ImageSharp`ë…¸ë“œë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ì‘ì—…ì„ í•´ì¤€ë‹¤.

âœ”`gatsby-transformer-sharp`í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€ë°©ë²•

1.í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜

```
npm install gatsby-transformer-sharp
```

2.ê°¯ì¸ ë¹„ ì„¤ì •íŒŒì¼ì— ì¶”ê°€

```javascript
module.exports = {
  siteMetadata: {
    title: "My First Gatsby Site",
  },
  plugins: [
    // ...existing plugins
    "gatsby-transformer-sharp",
  ],
};
```

âœ”ì„œë²„ ì¬ì‹œì‘ ìŠì§€ë§ê³  í•´ì£¼ì!

<h3>Render hero image in the blog post page template</h3>

1. Use GraphiQL to build the query

ë¸”ë¡œê·¸ í…œí”Œë¦¿ë ˆ ì¿¼ë¦¬ë¥¼ ì´ìš©í•´ ì£¼ê¸° ìœ„í•´ì„œ `GraphiQL`ì˜ hero image frontmatter í•„ë“œë¥¼ ì´ìš©í•´ì£¼ì

âœ”ì²˜ìŒë¶€í„° ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  í•„ìš” ì—†ì´ ê¸°ì¡´, ë¸”ë¡œê·¸ ì¿¼ë¦¬ë¥¼ ì´ìš©í•´ì„œ ì‘ì„±í•´ ì£¼ëŠ” ê²ƒì—ì„œ ì‹œì‘í•´ë³´ì

```
query ($id: String) {
  mdx(id: {eq: $id}) {
    frontmatter {
      title
      date(formatString: "MMMM D, YYYY")
    }
    body
  }
}
```

(ğŸ¤” idë¥¼ ì‚¬ìš©í•´ì£¼ëŠ”ê²Œ idì™€ ì¼ì¹˜í•˜ëŠ” ê²Œì‹œë¬¼ì„ ì°¾ê¸°ì— ìš©ì´í•˜ë‹ˆê¹Œ ì¸ë°, ì–´ì¼€ ì°¾ì•„ì£¼ëŠ”ê±°ì§€? ê·¸ëƒ¥ ì¼ì¹˜í•˜ëŠ”ê±°ë¡œ ì°¾ì•„ì£¼ë‚˜?ê¶ê·¸ë§¤ )

```
query ($id: String) {
  mdx(id: {eq: $id}) {
    frontmatter {
      title
      date(formatString: "MMMM D, YYYY")
      hero_image_alt
      hero_image_credit_link
      hero_image_credit_text
    }
    body
  }
}
```

`GraphiQL`ì˜ Explorerì°½ì—ì„œ `hero_image_alt`,`hero_image_credit_link`, `hero_image_credit_text` í•„ë“œë¥¼ ì²´í¬í•´ì¤€ë‹¤. ì²´í¬í›„ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•´ë³´ë©´ ì´ì „ì— ì¶”ê°€í–ˆë˜ `frontmatter`ìš”ì†Œë“¤ì„ JSONìœ¼ë¡œ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ ë³¼ ìˆ˜ìˆì„ ê²ƒì´ë‹¤

> ğŸ¤”ê·¸ëŸ°ë° `GraphiQL`ëŠ” ì–´ë–»ê²Œ ì´ì „ì— ì¶”ê°€í•´ì¤€ `frontmatter`ìš”ì†Œë“¤ì„ í•„ë“œì— ì¶”ê°€í•´ì£¼ëŠ” ê±¸ê¹Œ?  
> ğŸ‘‰ ê°¯ì¸ ë¹„ê°€ ì‚¬ì´íŠ¸ë¥¼ ë¹Œë“œí•´ì¤„ë•Œ, ë°ì´í„° ë ˆì´ì–´ì—ì„œ `GraphQL`ìŠ¤í‚¤ë§ˆë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤.ì´ë•Œ `schema inference`ë¥¼ í†µí•´ ê°¯ì¸ ë¹„ê°€ ìŠ¤í‚¤ë§ˆë¥¼ ë§Œë“¤ì–´ì¤„ë•Œ ê° í•„ë“œì˜ ë°ì´í„° íƒ€ì…ì„ ì˜ˆì¸¡í•´ ì§„í–‰í•´ì¤€ë‹¤.  
> ê·¸ë˜ì„œ íŠœí† ë¦¬ì–¼ì˜ ê²½ìš° ê°¯ì¸ ë¹„ê°€ MDXì˜ frontmatterë¡œ ë¶€í„° `hero_image`í•„ë“œê°€ íŒŒì¼ë…¸ë“œë¼ëŠ” ê²ƒì„ ì•Œê¸°ë•Œë¬¸ì— ìì—°ìŠ¤ëŸ½ê²Œ íŒŒì¼ í•„ë“œ ì¿¼ë¦¬ë¥¼ ì´ìš©í•´ì¤„ ìˆ˜ìˆë„ë¡ í•œë‹¤.

??`schema inference` ì •í™•íˆë­ì§€???í•„ë“œì˜ ë°ì´í„° íƒ€ì…ì„ ì˜ˆì¸¡í•´ì£¼ëŠ” ì¹­êµ¬ì •ë„ì¸ê°€???

```
query ($id: String) {
  mdx(id: {eq: $id}) {
    frontmatter {
      title
      date(formatString: "MMMM D, YYYY")
      hero_image_alt
      hero_image_credit_link
      hero_image_credit_text
      hero_image {
        childImageSharp {
          gatsbyImageData
        }
      }
    }
    body
  }
}
```

ì¶”ê°€ì ìœ¼ë¡œ `hero_image`í•„ë“œì˜ `childImageSharp`í•„ë“œë¥¼ ì´ìš©í•´ `gatsbyImageData`ë¥¼ ì´ìš©í•´ì¤€ë‹¤. ê·¸ëŸ°ë° ìœ„ì™€ê°™ì€ í•„ë“œë“¤ì„ ì´ìš©í•´ì£¼ëŠ” ì´ìœ ëŠ” `gatsbyImageData`ì— ê° ê²Œì‹œê¸€ì—ì„œ ì´ìš©ë  í—¤ë” ì´ë¯¸ì§€ë“¤ì˜ ì •ë³´ë¥¼ ì–»ì–´ì˜¬ ìˆ˜ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŸ¬í•œ ì •ë³´ë“¤ì€ ë¹Œë“œë  ë•Œ (ë°ì´í„°ë“¤ì€) `gatsby-plugin-sharp`ì— ì˜í•´ ìƒì„±ëœë‹¤.

(ğŸ¤”`gatsbyImageData`ê°ì²´ëŠ” ì´ë¯¸ì§€ë¥¼ ëœë”ë§ í•˜ê¸°ìœ„í•´ í•„ìš”í–ˆë˜ `GatsbyImage`ì»´í¬ë„ŒíŠ¸ì™€ ë™ì¼í•œ êµ¬ì¡°ë¥¼ ì§€ë‹Œë‹¤. ì´ê²Œ ì–´ë–¤ì˜ë¯¸ì§€?????)

âœ”GraphiQLì—ì„œ `gatsbyImageData`í•„ë“œì— ì¼ë¶€ ì „ë‹¬ ì¸ìë“¤ì„ í†µí•´ ì´ë¯¸ì§€ ìµœì í™” ì‘ì—…ì— ì´ìš©í•  ìˆ˜ìˆë‹¤

2. Add hero image using GatsbyImage component

1) ì´ì „ì— ë§Œë“¤ì–´ ë†“ì•˜ë˜ ì¿¼ë¦¬ì—, ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ ì¤€ ì¿¼ë¦¬ë¥¼ ëŒ€ì²´í•´ì¤ë‹ˆë‹¤

```
export const query = graphql`
  query($id: String) {
    mdx(id: {eq: $id}) {
      body
      frontmatter {
        title
        date(formatString: "MMMM DD, YYYY")
        hero_image_alt
        hero_image_credit_link
        hero_image_credit_text
        hero_image {
          childImageSharp {
            gatsbyImageData
          }
        }
      }
    }
  }
```

-`GatsbyImage`ì™€ `getImage`ì„ `gatsby-plugin-image`ì—ì„œ importí•´ì¤ë‹ˆë‹¤  
 (??helper function:ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ê³„ì‚°ì„ ì¼ë¶€ ìˆ˜í–‰í•´ì£¼ëŠ” í•¨ìˆ˜,ì—¬ê¸°ì„œëŠ” getImageê°€ í—¬í¼í•¨ìˆ˜ë¡œ ì“°ì¸ë‹¤ )

-`getImage` í—¬í¼í•¨ìˆ˜ë¥¼ `hero_image`í•„ë“œë¡œë¶€í„° `gatsbyImageData`ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ê¸°ìœ„í•´ ì‚¬ìš©í•´ì¤ë‹ˆë‹¤

```javascript
// imports

const BlogPost = ({ data }) => {
  const image = getImage(data.mdx.frontmatter.hero_image)

  return (
    // ...
  )
}

// ...
```

ğŸ¤”getImageê°€ ì–´ë–»ê²Œ ì‘ìš©ì´ë˜ì–´ì„œ ì €ê±¸ ë°›ëŠ”ê±´ì§€ê°€ ê¶ê¸ˆí•œë° ...ì•Œë ¤í•˜ë©´ ì•ˆë ê²ƒê°€í‹ˆ ã…‹ã…‹ã…‹

âœ” `getImage`ëŠ” í—¬í¼ í•¨ìˆ˜ë¡œ íŒŒì¼ ë…¸ë“œë‚˜ `ImageSharp`ë…¸ë“œë¥¼ ë°›ì•„ `gatsbyImageData`ë¡œ ë˜ëŒë ¤ì£¼ì–´, ì¡°ê¸ˆë” ë§ë”í•œ ì½”ë“œë¥¼ ì´ìš©í•  ìˆ˜ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.  
ë§Œì•½ `getImage`ê°€ ì—†ë‹¤ë©´ `data.mdx.frontmatter.hero_image.childImageSharp.gatsbyImageData`ì™€ ê°™ì´ ê¸¸ê²Œ ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í• ê²ƒì…ë‹ˆë‹¤

2. í—¤ë” ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ë Œë”ë§ í•´ì£¼ê¸° ìœ„í•´ `GatsbyImage`ë¥¼ ì‚¬ìš©í•´ì£¼ëŠ”ë° ì´ë•Œ ë‘ê°œì˜ props(ì†ì„±)ì„ ì „ë‹¬í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.

```javascript
return (
  <Layout pageTitle={data.mdx.frontmatter.title}>
    <p>Posted: {data.mdx.frontmatter.date}</p>
    <GatsbyImage image={image} alt={data.mdx.frontmatter.hero_image_alt} />
    <MDXRenderer>{data.mdx.body}</MDXRenderer>
  </Layout>
);
```

- image: `hero_image`í•„ë“œë¡œ ë¶€í„° ë°›ì•„ì˜¨ `gatsbyImageData`
- alt: `hero_image_alt` í•„ë“œë¡œ ë¶€í„° ë°›ì•„ì˜¨ ëŒ€ì²´ í…ìŠ¤íŠ¸

! ì§  ë‹¤ì‹œ ì„œë²„ë¥¼ ì¬ì‹¤í–‰í•˜ë©´ ì´ë¯¸ì§€ê°€ ë¬´ì‚¬íˆ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤~!

3. Add image credit after hero image

ì´ì œ ì‚¬ìš©í•œ ì‚¬ì§„ì˜ ì¶œì²˜ë¥¼ ì´ì•¼ê¸°í•˜ê³  ë§ˆë¬´ë¦¬ë¥¼ í•˜ë©´ë©ë‹ˆë‹¤!

```javascript
// imports

const BlogPost = ({ data }) => {
  const image = getImage(data.mdx.frontmatter.hero_image);

  return (
    <Layout pageTitle={data.mdx.frontmatter.title}>
      <p>{data.mdx.frontmatter.date}</p>
      <GatsbyImage image={image} alt={data.mdx.frontmatter.hero_image_alt} />
      <p>
        Photo Credit:{" "}
        <a href={data.mdx.frontmatter.hero_image_credit_link}>
          {data.mdx.frontmatter.hero_image_credit_text}
        </a>
      </p>
      <MDXRenderer>{data.mdx.body}</MDXRenderer>
    </Layout>
  );
};

export const query = graphql`
  ...
`;

export default BlogPost;
```

ê·¸ëŸ°ë° ì´ë•Œ `<a>`ë¥¼ ì¨ì£¼ì–´ì•¼í• ì§€ ì•„ë‹ˆë©´ `<Link>`ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•´ ì£¼ì–´ì•¼í• ì§€ ê³ ë¯¼ì´ë¼ë©´,ì´ë™í•´ì•¼í•  ì‚¬ì´íŠ¸ê°€ ë¸”ë¡œê·¸ ë‚´ì˜ ì‚¬ì´íŠ¸ê°€ ì•„ë‹ˆë¼ë©´ aíƒœê·¸ë¥¼ ë§Œì•½ ê°¯ì¸ ë¹„ ë‚´ì˜ ì‚¬ì´íŠ¸ë¼ë©´ ë§í¬íƒœê·¸ë¥¼ ì´ìš©í•´ì£¼ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤
